function BubbleSort(arr):
    n = length(arr)
    swapped = true
    while swapped:
        swapped = false
        for i from 0 to n - 2:
            if arr[i] > arr[i + 1]:
                swap(arr[i], arr[i + 1])
                swapped = true
        n = n - 1  // Optimization: last element is already sorted
        .